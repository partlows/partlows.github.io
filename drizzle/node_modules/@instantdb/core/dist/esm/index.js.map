{"version":3,"file":"index.js","sourceRoot":"","sources":["../../src/index.ts"],"names":[],"mappings":"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","sourcesContent":["import Reactor from './Reactor.js';\nimport {\n  tx,\n  txInit,\n  lookup,\n  getOps,\n  type TxChunk,\n  type TransactionChunk,\n} from './instatx.js';\nimport weakHash from './utils/weakHash.js';\nimport id from './utils/id.ts';\nimport IndexedDBStorage from './IndexedDBStorage.ts';\nimport { coerceToDate } from './utils/dates.js';\nimport WindowNetworkListener from './WindowNetworkListener.js';\nimport { i } from './schema.js';\nimport { createDevtool } from './devtool.js';\nimport version from './version.ts';\nimport { validateQuery, QueryValidationError } from './queryValidation.ts';\nimport {\n  validateTransactions,\n  TransactionValidationError,\n} from './transactionValidation.ts';\n\nimport {\n  StoreInterface,\n  type StoreInterfaceClass,\n  type StoreInterfaceStoreName,\n} from './utils/PersistedObject.ts';\nimport { createInstantRouteHandler } from './createRouteHandler.ts';\nimport { parseSchemaFromJSON } from './parseSchemaFromJSON.ts';\n\nimport type {\n  PresenceOpts,\n  PresenceResponse,\n  PresenceSlice,\n  RoomSchemaShape,\n} from './presence.ts';\nimport type {\n  DevtoolConfig,\n  IDatabase,\n  IInstantDatabase,\n  StrictDevtoolConfig,\n} from './coreTypes.ts';\nimport type {\n  Query,\n  QueryResponse,\n  InstaQLResponse,\n  PageInfoResponse,\n  Exactly,\n  InstantObject,\n  InstaQLParams,\n  InstaQLOptions,\n  InstaQLQueryParams,\n  InstaQLEntity,\n  InstaQLEntitySubquery,\n  InstaQLResult,\n  InstaQLFields,\n  ValidQuery,\n} from './queryTypes.ts';\nimport type { PresencePeer } from './presenceTypes.ts';\nimport type {\n  AuthState,\n  User,\n  AuthResult,\n  ConnectionStatus,\n} from './clientTypes.ts';\nimport type {\n  InstantQuery,\n  InstantQueryResult,\n  InstantSchema,\n  InstantEntity,\n  InstantSchemaDatabase,\n} from './helperTypes.ts';\nimport type {\n  InstantDBAttr,\n  InstantDBAttrOnDelete,\n  InstantDBCheckedDataType,\n  InstantDBIdent,\n  InstantDBInferredType,\n} from './attrTypes.ts';\nimport type {\n  AttrsDefs,\n  CardinalityKind,\n  DataAttrDef,\n  EntitiesDef,\n  EntitiesWithLinks,\n  EntityDef,\n  RoomsDef,\n  InstantSchemaDef,\n  InstantGraph,\n  LinkAttrDef,\n  LinkDef,\n  LinksDef,\n  PresenceOf,\n  ResolveAttrs,\n  RoomsOf,\n  TopicsOf,\n  TopicOf,\n  ValueTypes,\n  InstantUnknownSchema,\n  InstantUnknownSchemaDef,\n  BackwardsCompatibleSchema,\n  UpdateParams,\n  LinkParams,\n  CreateParams,\n  RuleParams,\n} from './schemaTypes.ts';\nimport type { InstantRules } from './rulesTypes.ts';\nimport type { UploadFileResponse, DeleteFileResponse } from './StorageAPI.ts';\nimport { FrameworkClient, type FrameworkConfig } from './framework.ts';\n\nimport type {\n  ExchangeCodeForTokenParams,\n  SendMagicCodeParams,\n  SendMagicCodeResponse,\n  SignInWithIdTokenParams,\n  VerifyMagicCodeParams,\n  VerifyResponse,\n} from './authAPI.ts';\n\nimport { InstantAPIError, type InstantIssue } from './utils/fetch.js';\nimport { InstantError } from './InstantError.ts';\nimport { EventSourceType } from './Connection.ts';\nimport { CallbackEventType as SyncTableCallbackEventType } from './SyncTable.ts';\nimport type {\n  SyncTableCallback,\n  CallbackEvent as SyncTableCallbackEvent,\n  InitialSyncBatch as SyncTableInitialSyncBatch,\n  InitialSyncComplete as SyncTableInitialSyncComplete,\n  SyncTransaction as SyncTableSyncTransaction,\n  LoadFromStorage as SyncTableLoadFromStorage,\n  SetupError as SyncTableSetupError,\n} from './SyncTable.ts';\n\nconst defaultOpenDevtool = true;\n\n// types\n\ntype ExactlyOne<T> = {\n  [K in keyof T]: Pick<T, K> & Partial<Record<Exclude<keyof T, K>, never>>;\n}[keyof T];\n\nexport type Config = {\n  appId: string;\n  websocketURI?: string;\n  apiURI?: string;\n  devtool?: boolean | DevtoolConfig;\n  verbose?: boolean;\n  queryCacheLimit?: number;\n  useDateObjects: boolean;\n  disableValidation?: boolean;\n};\n\nexport type InstantConfig<\n  S extends InstantSchemaDef<any, any, any>,\n  UseDates extends boolean = false,\n> = {\n  appId: string;\n  schema?: S;\n  websocketURI?: string;\n  firstPartyPath?: string;\n  apiURI?: string;\n  devtool?: boolean | DevtoolConfig;\n  verbose?: boolean;\n  queryCacheLimit?: number;\n  useDateObjects: UseDates;\n  disableValidation?: boolean;\n  Store?: StoreInterfaceClass;\n};\n\nexport type ConfigWithSchema<S extends InstantGraph<any, any>> = Config & {\n  schema: S;\n};\n\nexport type TransactionResult = {\n  status: 'synced' | 'enqueued';\n  clientId: string;\n};\n\nexport type PublishTopic<TopicsByKey> = <Key extends keyof TopicsByKey>(\n  topic: Key,\n  data: TopicsByKey[Key],\n) => void;\n\nexport type SubscribeTopic<PresenceShape, TopicsByKey> = <\n  Key extends keyof TopicsByKey,\n>(\n  topic: Key,\n  onEvent: (event: TopicsByKey[Key], peer: PresenceShape) => void,\n) => () => void;\n\nexport type GetPresence<PresenceShape> = <Keys extends keyof PresenceShape>(\n  opts: PresenceOpts<PresenceShape, Keys>,\n) => PresenceResponse<PresenceShape, Keys> | null;\n\nexport type SubscribePresence<PresenceShape> = <\n  Keys extends keyof PresenceShape,\n>(\n  opts: PresenceOpts<PresenceShape, Keys>,\n  onChange: (slice: PresenceResponse<PresenceShape, Keys>) => void,\n) => () => void;\n\nexport type RoomHandle<PresenceShape, TopicsByKey> = {\n  leaveRoom: () => void;\n  publishTopic: PublishTopic<TopicsByKey>;\n  subscribeTopic: SubscribeTopic<PresenceShape, TopicsByKey>;\n  publishPresence: (data: Partial<PresenceShape>) => void;\n  getPresence: GetPresence<PresenceShape>;\n  subscribePresence: SubscribePresence<PresenceShape>;\n};\n\ntype AuthToken = string;\n\ntype SubscriptionState<Q, Schema, WithCardinalityInference extends boolean> =\n  | { error: { message: string }; data: undefined; pageInfo: undefined }\n  | {\n      error: undefined;\n      data: QueryResponse<Q, Schema, WithCardinalityInference>;\n      pageInfo: PageInfoResponse<Q>;\n    };\n\ntype InstaQLSubscriptionState<Schema, Q, UseDates extends boolean> =\n  | { error: { message: string }; data: undefined; pageInfo: undefined }\n  | {\n      error: undefined;\n      data: InstaQLResponse<Schema, Q, UseDates>;\n      pageInfo: PageInfoResponse<Q>;\n    };\n\ntype LifecycleSubscriptionState<\n  Q,\n  Schema,\n  WithCardinalityInference extends boolean,\n> = SubscriptionState<Q, Schema, WithCardinalityInference> & {\n  isLoading: boolean;\n};\n\ntype InstaQLLifecycleState<Schema, Q, UseDates extends boolean = false> =\n  | (InstaQLSubscriptionState<Schema, Q, UseDates> & {\n      isLoading: boolean;\n    })\n  | {\n      isLoading: true;\n      data: undefined;\n      pageInfo: undefined;\n      error: undefined;\n    };\n\ntype UnsubscribeFn = () => void;\n\n// consts\n\nconst defaultConfig = {\n  apiURI: 'https://api.instantdb.com',\n  websocketURI: 'wss://api.instantdb.com/runtime/session',\n};\n\n// hmr\nfunction initSchemaHashStore(): WeakMap<any, string> {\n  globalThis.__instantDbSchemaHashStore =\n    globalThis.__instantDbSchemaHashStore ?? new WeakMap<any, string>();\n  return globalThis.__instantDbSchemaHashStore;\n}\n\nfunction initGlobalInstantCoreStore(): Record<string, any> {\n  globalThis.__instantDbStore = globalThis.__instantDbStore ?? {};\n  return globalThis.__instantDbStore;\n}\n\nfunction reactorKey(config: InstantConfig<any, boolean>): string {\n  // @ts-expect-error\n  const adminToken = config.__adminToken;\n  return (\n    config.appId +\n    '_' +\n    (config.websocketURI || 'default_ws_uri') +\n    '_' +\n    (config.apiURI || 'default_api_uri') +\n    '_' +\n    (adminToken || 'client_only') +\n    '_' +\n    config.useDateObjects\n  );\n}\n\nconst globalInstantCoreStore = initGlobalInstantCoreStore();\nconst schemaHashStore = initSchemaHashStore();\n\ntype SignoutOpts = {\n  invalidateToken?: boolean;\n};\n\n/**\n * Functions to log users in and out.\n *\n * @see https://instantdb.com/docs/auth\n */\nclass Auth {\n  constructor(private db: Reactor) {}\n\n  /**\n   * Sends a magic code to the user's email address.\n   *\n   * Once you send the magic code, see {@link auth.signInWithMagicCode} to let the\n   * user verify.\n   *\n   * @see https://instantdb.com/docs/auth\n   * @example\n   *  db.auth.sendMagicCode({email: \"example@gmail.com\"})\n   *    .catch((err) => console.error(err.body?.message))\n   */\n  sendMagicCode = (\n    params: SendMagicCodeParams,\n  ): Promise<SendMagicCodeResponse> => {\n    return this.db.sendMagicCode(params);\n  };\n\n  /**\n   * Verify a magic code that was sent to the user's email address.\n   *\n   * @see https://instantdb.com/docs/auth\n   *\n   * @example\n   *  db.auth.signInWithMagicCode({email: \"example@gmail.com\", code: \"123456\"})\n   *       .catch((err) => console.error(err.body?.message))\n   */\n  signInWithMagicCode = (\n    params: VerifyMagicCodeParams,\n  ): Promise<VerifyResponse> => {\n    return this.db.signInWithMagicCode(params);\n  };\n\n  /**\n   * Sign in a user with a refresh token\n   *\n   * @see https://instantdb.com/docs/backend#frontend-auth-sign-in-with-token\n   *\n   * @example\n   *   // Get the token from your backend\n   *   const token = await fetch('/signin', ...);\n   *   //Sign in\n   *   db.auth.signInWithToken(token);\n   */\n  signInWithToken = (token: AuthToken): Promise<VerifyResponse> => {\n    return this.db.signInWithCustomToken(token);\n  };\n\n  /**\n   * Sign in as guest, creating a new user without email\n   *\n   * @see https://instantdb.com/docs/auth\n   *\n   * @example\n   *   db.auth.signInAsGuest();\n   */\n  signInAsGuest = (): Promise<VerifyResponse> => {\n    return this.db.signInAsGuest();\n  };\n\n  /**\n   * Create an authorization url to sign in with an external provider.\n   *\n   * @see https://instantdb.com/docs/auth\n   *\n   * @example\n   *   // Get the authorization url from your backend\n   *   const url = db.auth.createAuthorizationUrl({\n   *     clientName: \"google\",\n   *     redirectURL: window.location.href,\n   *   });\n   *\n   *   // Put it in a sign in link\n   *   <a href={url}>Log in with Google</a>\n   */\n  createAuthorizationURL = (params: {\n    clientName: string;\n    redirectURL: string;\n  }): string => {\n    return this.db.createAuthorizationURL(params);\n  };\n\n  /**\n   * Sign in with the id_token from an external provider like Google\n   *\n   * @see https://instantdb.com/docs/auth\n   * @example\n   *   db.auth\n   *  .signInWithIdToken({\n   *    // Token from external service\n   *    idToken: id_token,\n   *    // The name you gave the client when you registered it with Instant\n   *    clientName: \"google\",\n   *    // The nonce, if any, that you used when you initiated the auth flow\n   *    // with the external service.\n   *    nonce: your_nonce\n   *  })\n   *  .catch((err) => console.error(err.body?.message));\n   *\n   */\n  signInWithIdToken = (\n    params: SignInWithIdTokenParams,\n  ): Promise<VerifyResponse> => {\n    return this.db.signInWithIdToken(params);\n  };\n\n  /**\n   * Sign in with the id_token from an external provider like Google\n   *\n   * @see https://instantdb.com/docs/auth\n   * @example\n   *   db.auth\n   *  .exchangeOAuthCode({\n   *    // code received in redirect from OAuth callback\n   *    code: code\n   *    // The PKCE code_verifier, if any, that you used when you\n   *    // initiated the auth flow\n   *    codeVerifier: your_code_verifier\n   *  })\n   *  .catch((err) => console.error(err.body?.message));\n   *\n   */\n  exchangeOAuthCode = (params: ExchangeCodeForTokenParams) => {\n    return this.db.exchangeCodeForToken(params);\n  };\n\n  /**\n   * OpenID Discovery path for use with tools like\n   * expo-auth-session that use auto-discovery of\n   * OAuth parameters.\n   *\n   * @see https://instantdb.com/docs/auth\n   * @example\n   *   const discovery = useAutoDiscovery(\n   *     db.auth.issuerURI()\n   *   );\n   */\n  issuerURI = (): string => {\n    return this.db.issuerURI();\n  };\n\n  /**\n   * Sign out the current user\n   */\n  signOut = (opts: SignoutOpts = { invalidateToken: true }): Promise<void> => {\n    return this.db.signOut(opts);\n  };\n}\n\ntype FileOpts = {\n  contentType?: string;\n  contentDisposition?: string;\n  fileSize?: number; // Required for streaming uploads\n};\n\n/**\n * Functions to manage file storage.\n */\nclass Storage {\n  constructor(private db: Reactor) {}\n\n  /**\n   * Uploads file at the provided path.\n   *\n   * @see https://instantdb.com/docs/storage\n   * @example\n   *   const [file] = e.target.files; // result of file input\n   *   const data = await db.storage.uploadFile('photos/demo.png', file);\n   */\n  uploadFile = (\n    path: string,\n    file: File | Blob,\n    opts: FileOpts = {},\n  ): Promise<UploadFileResponse> => {\n    return this.db.uploadFile(path, file, opts);\n  };\n\n  /**\n   * Deletes a file by path name.\n   *\n   * @see https://instantdb.com/docs/storage\n   * @example\n   *   await db.storage.delete('photos/demo.png');\n   */\n  delete = (pathname: string) => {\n    return this.db.deleteFile(pathname);\n  };\n\n  // Deprecated Storage API (Jan 2025)\n  // ---------------------------------\n\n  /**\n   * @deprecated. Use `db.storage.uploadFile` instead\n   * remove in the future.\n   */\n  upload = (pathname: string, file: File) => {\n    return this.db.upload(pathname, file);\n  };\n\n  /**\n   * @deprecated Use `db.storage.uploadFile` instead\n   */\n  put = this.upload;\n\n  /**\n   * @deprecated. getDownloadUrl will be removed in the future.\n   * Use `useQuery` instead to query and fetch for valid urls\n   *\n   * db.useQuery({\n   *   $files: {\n   *     $: {\n   *       where: {\n   *         path: \"moop.png\"\n   *       }\n   *     }\n   *   }\n   * })\n   */\n  getDownloadUrl = (pathname: string) => {\n    return this.db.getDownloadUrl(pathname);\n  };\n}\n\n// util\n\nfunction coerceQuery(o: any) {\n  // stringify and parse to remove undefined values\n  return JSON.parse(JSON.stringify(o));\n}\n\nclass InstantCoreDatabase<\n  Schema extends InstantSchemaDef<any, any, any>,\n  UseDates extends boolean = false,\n> implements IInstantDatabase<Schema>\n{\n  public _reactor: Reactor<RoomsOf<Schema>>;\n  public auth: Auth;\n  public storage: Storage;\n\n  public tx = txInit<Schema>();\n\n  constructor(reactor: Reactor<RoomsOf<Schema>>) {\n    this._reactor = reactor;\n    this.auth = new Auth(this._reactor);\n    this.storage = new Storage(this._reactor);\n  }\n\n  /**\n   * Use this to write data! You can create, update, delete, and link objects\n   *\n   * @see https://instantdb.com/docs/instaml\n   *\n   * @example\n   *   // Create a new object in the `goals` namespace\n   *   const goalId = id();\n   *   db.transact(db.tx.goals[goalId].update({title: \"Get fit\"}))\n   *\n   *   // Update the title\n   *   db.transact(db.tx.goals[goalId].update({title: \"Get super fit\"}))\n   *\n   *   // Delete it\n   *   db.transact(db.tx.goals[goalId].delete())\n   *\n   *   // Or create an association:\n   *   todoId = id();\n   *   db.transact([\n   *    db.tx.todos[todoId].update({ title: 'Go on a run' }),\n   *    db.tx.goals[goalId].link({todos: todoId}),\n   *  ])\n   */\n  transact(\n    chunks: TransactionChunk<any, any> | TransactionChunk<any, any>[],\n  ): Promise<TransactionResult> {\n    return this._reactor.pushTx(chunks);\n  }\n\n  getLocalId(name: string): Promise<string> {\n    return this._reactor.getLocalId(name);\n  }\n\n  /**\n   * Use this to query your data!\n   *\n   * @see https://instantdb.com/docs/instaql\n   *\n   * @example\n   *  // listen to all goals\n   *  db.subscribeQuery({ goals: {} }, (resp) => {\n   *    console.log(resp.data.goals)\n   *  })\n   *\n   *  // goals where the title is \"Get Fit\"\n   *  db.subscribeQuery(\n   *    { goals: { $: { where: { title: \"Get Fit\" } } } },\n   *    (resp) => {\n   *      console.log(resp.data.goals)\n   *    }\n   *  )\n   *\n   *  // all goals, _alongside_ their todos\n   *  db.subscribeQuery({ goals: { todos: {} } }, (resp) => {\n   *    console.log(resp.data.goals)\n   *  });\n   */\n  subscribeQuery<\n    Q extends ValidQuery<Q, Schema>,\n    UseDatesLocal extends boolean = UseDates,\n  >(\n    query: Q,\n    cb: (resp: InstaQLSubscriptionState<Schema, Q, UseDatesLocal>) => void,\n    opts?: InstaQLOptions,\n  ) {\n    return this._reactor.subscribeQuery(query, cb, opts);\n  }\n\n  /**\n   * Listen for the logged in state. This is useful\n   * for deciding when to show a login screen.\n   *\n   * @see https://instantdb.com/docs/auth\n   * @example\n   *   const unsub = db.subscribeAuth((auth) => {\n   *     if (auth.user) {\n   *     console.log('logged in as', auth.user.email)\n   *    } else {\n   *      console.log('logged out')\n   *    }\n   *  })\n   */\n  subscribeAuth(cb: (auth: AuthResult) => void): UnsubscribeFn {\n    return this._reactor.subscribeAuth(cb);\n  }\n\n  /**\n   * One time query for the logged in state. This is useful\n   * for scenarios where you want to know the current auth\n   * state without subscribing to changes.\n   *\n   * @see https://instantdb.com/docs/auth\n   * @example\n   *   const user = await db.getAuth();\n   *   console.log('logged in as', user.email)\n   */\n  getAuth(): Promise<User | null> {\n    return this._reactor.getAuth();\n  }\n\n  /**\n   * Listen for connection status changes to Instant. This is useful\n   * for building things like connectivity indicators\n   *\n   * @see https://www.instantdb.com/docs/patterns#connection-status\n   * @example\n   *   const unsub = db.subscribeConnectionStatus((status) => {\n   *     const connectionState =\n   *       status === 'connecting' || status === 'opened'\n   *         ? 'authenticating'\n   *       : status === 'authenticated'\n   *         ? 'connected'\n   *       : status === 'closed'\n   *         ? 'closed'\n   *       : status === 'errored'\n   *         ? 'errored'\n   *       : 'unexpected state';\n   *\n   *     console.log('Connection status:', connectionState);\n   *   });\n   */\n  subscribeConnectionStatus(\n    cb: (status: ConnectionStatus) => void,\n  ): UnsubscribeFn {\n    return this._reactor.subscribeConnectionStatus(cb);\n  }\n\n  /**\n   * Join a room to publish and subscribe to topics and presence.\n   *\n   * @see https://instantdb.com/docs/presence-and-topics\n   * @example\n   * // init\n   * const db = init();\n   * const room = db.joinRoom(roomType, roomId);\n   * // usage\n   * const unsubscribeTopic = room.subscribeTopic(\"foo\", console.log);\n   * const unsubscribePresence = room.subscribePresence({}, console.log);\n   * room.publishTopic(\"hello\", { message: \"hello world!\" });\n   * room.publishPresence({ name: \"joe\" });\n   * // later\n   * unsubscribePresence();\n   * unsubscribeTopic();\n   * room.leaveRoom();\n   */\n  joinRoom<RoomType extends keyof RoomsOf<Schema>>(\n    roomType: RoomType = '_defaultRoomType' as RoomType,\n    roomId: string = '_defaultRoomId',\n    opts?: {\n      initialPresence?: Partial<PresenceOf<Schema, RoomType>>;\n    },\n  ): RoomHandle<PresenceOf<Schema, RoomType>, TopicsOf<Schema, RoomType>> {\n    const leaveRoom = this._reactor.joinRoom(roomId, opts?.initialPresence);\n\n    return {\n      leaveRoom,\n      subscribeTopic: (topic, onEvent) =>\n        this._reactor.subscribeTopic(roomId, topic, onEvent),\n      subscribePresence: (opts, onChange) =>\n        this._reactor.subscribePresence(roomType, roomId, opts, onChange),\n      publishTopic: (topic, data) =>\n        this._reactor.publishTopic({ roomType, roomId, topic, data }),\n      publishPresence: (data) =>\n        this._reactor.publishPresence(roomType, roomId, data),\n      getPresence: (opts) => this._reactor.getPresence(roomType, roomId, opts),\n    };\n  }\n\n  shutdown() {\n    delete globalInstantCoreStore[reactorKey(this._reactor.config)];\n    this._reactor.shutdown();\n  }\n\n  /**\n   * Use this for one-off queries.\n   * Returns local data if available, otherwise fetches from the server.\n   * Because we want to avoid stale data, this method will throw an error\n   * if the user is offline or there is no active connection to the server.\n   *\n   * @see https://instantdb.com/docs/instaql\n   *\n   * @example\n   *\n   *  const resp = await db.queryOnce({ goals: {} });\n   *  console.log(resp.data.goals)\n   */\n  queryOnce<Q extends ValidQuery<Q, Schema>>(\n    query: Q,\n    opts?: InstaQLOptions,\n  ): Promise<{\n    data: InstaQLResponse<Schema, Q, UseDates>;\n    pageInfo: PageInfoResponse<Q>;\n  }> {\n    return this._reactor.queryOnce(query, opts);\n  }\n\n  /**\n   * @deprecated This is an experimental function that is not yet ready for production use.\n   * Use this function to sync an entire namespace.\n   * It has many limitations that will be removed in the future:\n   * 1. Must be used with an admin token\n   * 2. Does not support permissions\n   * 3. Does not support where clauses\n   * 4. Does not support links\n   * It also does not support multiple top-level namespaces. For example,\n   *  {posts: {}, users: {}} is invalid. Only `posts` or `users` is allowed, but not both.\n   */\n  _syncTableExperimental<Q extends ValidQuery<Q, Schema>>(\n    query: ExactlyOne<Q>,\n    cb: SyncTableCallback<Schema, Q, UseDates>,\n  ): (\n    opts?: { keepSubscription: boolean | null | undefined } | null | undefined,\n  ) => void {\n    return this._reactor.subscribeTable(query, cb);\n  }\n}\n\nfunction schemaHash(schema?: InstantSchemaDef<any, any, any>): string {\n  if (!schema) {\n    return '0';\n  }\n\n  const fromStore = schemaHashStore.get(schema);\n  if (fromStore) {\n    return fromStore;\n  }\n  const hash = weakHash(schema);\n  schemaHashStore.set(schema, hash);\n  return hash;\n}\n\nfunction schemaChanged(\n  existingClient: InstantCoreDatabase<any, boolean>,\n  newSchema?: InstantSchemaDef<any, any, any>,\n): boolean {\n  return (\n    schemaHash(existingClient._reactor.config.schema) !== schemaHash(newSchema)\n  );\n}\n\n/**\n *\n * The first step: init your application!\n *\n * Visit https://instantdb.com/dash to get your `appId` :)\n *\n * @example\n *  import { init } from \"@instantdb/core\"\n *\n *  const db = init({ appId: \"my-app-id\" })\n *\n *  // You can also provide a schema for type safety and editor autocomplete!\n *\n *  import { init } from \"@instantdb/core\"\n *  import schema from \"\"../instant.schema.ts\";\n *\n *  const db = init({ appId: \"my-app-id\", schema })\n *\n *  // To learn more: https://instantdb.com/docs/modeling-data\n */\nfunction init<\n  Schema extends InstantSchemaDef<any, any, any> = InstantUnknownSchema,\n  UseDates extends boolean = false,\n>(\n  // Allows config with missing `useDateObjects`, but keeps `UseDates`\n  // as a non-nullable in the InstantConfig type.\n  config: Omit<InstantConfig<Schema, UseDates>, 'useDateObjects'> & {\n    useDateObjects?: UseDates;\n  },\n  Store?: any,\n  NetworkListener?: any,\n  versions?: { [key: string]: string },\n  EventSourceImpl?: any,\n): InstantCoreDatabase<Schema, UseDates> {\n  const configStrict = {\n    ...config,\n    appId: config.appId?.trim(),\n    useDateObjects: (config.useDateObjects ?? false) as UseDates,\n  };\n  const existingClient = globalInstantCoreStore[\n    reactorKey(configStrict)\n  ] as InstantCoreDatabase<any, UseDates>;\n\n  if (existingClient) {\n    if (schemaChanged(existingClient, configStrict.schema)) {\n      existingClient._reactor.updateSchema(configStrict.schema);\n    }\n    return existingClient;\n  }\n\n  const reactor = new Reactor<RoomsOf<Schema>>(\n    {\n      ...defaultConfig,\n      ...configStrict,\n      cardinalityInference: configStrict.schema ? true : false,\n    },\n    Store || IndexedDBStorage,\n    NetworkListener || WindowNetworkListener,\n    { ...(versions || {}), '@instantdb/core': version },\n    EventSourceImpl,\n  );\n\n  const client = new InstantCoreDatabase<any, UseDates>(reactor);\n  globalInstantCoreStore[reactorKey(configStrict)] = client;\n\n  handleDevtool(configStrict.appId, configStrict.devtool);\n\n  return client;\n}\n\nfunction handleDevtool(\n  appId: string,\n  devtool: boolean | DevtoolConfig | null | undefined,\n) {\n  if (\n    typeof window === 'undefined' ||\n    typeof window.location === 'undefined' ||\n    typeof document === 'undefined'\n  ) {\n    return;\n  }\n\n  if (typeof devtool === 'boolean' && !devtool) {\n    return;\n  }\n\n  const config: StrictDevtoolConfig = {\n    position: 'bottom-right' as const,\n    allowedHosts: ['localhost'],\n    ...(typeof devtool === 'object' ? devtool : {}),\n  };\n\n  if (!config.allowedHosts.includes(window.location.hostname)) {\n    return;\n  }\n\n  createDevtool(appId, config);\n}\n\n/**\n * @deprecated\n * `init_experimental` is deprecated. You can replace it with `init`.\n *\n * @example\n *\n * // Before\n * import { init_experimental } from \"@instantdb/core\"\n * const db = init_experimental({  ...  });\n *\n * // After\n * import { init } from \"@instantdb/core\"\n * const db = init({ ...  });\n */\nconst init_experimental = init;\n\nexport {\n  // bada bing bada boom\n  init,\n  init_experimental,\n  id,\n  tx,\n  txInit,\n  lookup,\n  validateQuery,\n  QueryValidationError,\n  validateTransactions,\n  parseSchemaFromJSON,\n  TransactionValidationError,\n  FrameworkClient,\n\n  // error\n  InstantAPIError,\n\n  // cli\n  i,\n\n  // util\n  getOps,\n  coerceQuery,\n  weakHash,\n  coerceToDate,\n  IndexedDBStorage,\n  WindowNetworkListener,\n  InstantCoreDatabase,\n  Auth,\n  Storage,\n  version,\n  InstantError,\n\n  // sync table enums\n  SyncTableCallbackEventType,\n\n  // og types\n  type IDatabase,\n  type RoomSchemaShape,\n  type Query,\n  type QueryResponse,\n  type InstaQLResponse,\n  type PageInfoResponse,\n  type InstantObject,\n  type Exactly,\n  type TransactionChunk,\n  type AuthState,\n  type ConnectionStatus,\n  type User,\n  type AuthToken,\n  type TxChunk,\n  type SubscriptionState,\n  type InstaQLSubscriptionState,\n  type LifecycleSubscriptionState,\n  type InstaQLLifecycleState,\n\n  // presence types\n  type PresenceOpts,\n  type PresenceSlice,\n  type PresenceResponse,\n  type PresencePeer,\n\n  // new query types\n  type InstaQLParams,\n  type ValidQuery,\n  type InstaQLOptions,\n  type InstaQLQueryParams,\n  type InstantQuery,\n  type InstantQueryResult,\n  type InstantSchema,\n  type InstantEntity,\n  type InstantSchemaDatabase,\n  type InstaQLFields,\n\n  // schema types\n  type AttrsDefs,\n  type CardinalityKind,\n  type DataAttrDef,\n  type EntitiesDef,\n  type InstantUnknownSchemaDef,\n  type EntitiesWithLinks,\n  type EntityDef,\n  type RoomsDef,\n  type InstantGraph,\n  type LinkAttrDef,\n  type LinkDef,\n  type LinksDef,\n  type ResolveAttrs,\n  type ValueTypes,\n  type RoomsOf,\n  type PresenceOf,\n  type TopicsOf,\n  type TopicOf,\n  type InstaQLEntity,\n  type InstaQLResult,\n  type InstaQLEntitySubquery,\n  type InstantSchemaDef,\n  type InstantUnknownSchema,\n  type IInstantDatabase,\n  type BackwardsCompatibleSchema,\n  type InstantRules,\n  type UpdateParams,\n  type LinkParams,\n  type CreateParams,\n  type RuleParams,\n\n  // attr types\n  type InstantDBAttr,\n  type InstantDBAttrOnDelete,\n  type InstantDBCheckedDataType,\n  type InstantDBIdent,\n  type InstantDBInferredType,\n\n  // auth types\n  type ExchangeCodeForTokenParams,\n  type SendMagicCodeParams,\n  type SendMagicCodeResponse,\n  type SignInWithIdTokenParams,\n  type VerifyMagicCodeParams,\n  type VerifyResponse,\n\n  // storage types\n  type FileOpts,\n  type UploadFileResponse,\n  type DeleteFileResponse,\n\n  // SSE\n  type EventSourceType,\n  type FrameworkConfig,\n\n  // sync table types\n  type SyncTableCallback,\n  type SyncTableCallbackEvent,\n  type SyncTableInitialSyncBatch,\n  type SyncTableInitialSyncComplete,\n  type SyncTableSyncTransaction,\n  type SyncTableLoadFromStorage,\n  type SyncTableSetupError,\n\n  // error types\n  type InstantIssue,\n\n  // store (e.g. indexeddb) interface\n  StoreInterface,\n  type StoreInterfaceClass,\n  type StoreInterfaceStoreName,\n  createInstantRouteHandler,\n};\n\n/** @deprecated Use StoreInterface instead */\nexport const StorageInterface = StoreInterface;\n\n/** @deprecated Use StoreInterfaceStoreName instead */\nexport type StorageInterfaceStoreName = StoreInterfaceStoreName;\n"]}