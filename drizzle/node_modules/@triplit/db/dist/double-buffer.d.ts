import { Change, CollectionChanges, CollectionName, EntityId, KVStoreOrTransaction, KVStoreTransaction, WriteBuffer, type DBChanges, type DoubleBuffer } from './types.js';
export declare class KVDoubleBuffer implements DoubleBuffer, WriteBuffer {
    private _buffers;
    private activeBufferIndex;
    constructor(buffer0: WriteBuffer, buffer1: WriteBuffer);
    get activeBuffer(): WriteBuffer;
    get inactiveBuffer(): WriteBuffer;
    getChangesForCollection(storage: KVStoreOrTransaction, collectionName: CollectionName): Promise<CollectionChanges | undefined>;
    getChangesForEntity(storage: KVStoreOrTransaction, collection: string, id: string): Promise<{
        update: Change;
        delete: boolean;
    } | undefined>;
    clear(tx: KVStoreTransaction): Promise<void>;
    clearChangesForEntity(tx: KVStoreTransaction, collectionName: CollectionName, id: EntityId): Promise<void>;
    write(tx: KVStoreTransaction, changes: DBChanges): Promise<void>;
    isEmpty(storage: KVStoreOrTransaction): Promise<boolean>;
    getChanges(storage: KVStoreOrTransaction): Promise<DBChanges>;
    lockAndSwitchBuffers(): void;
    getLockedBuffer(): WriteBuffer;
    getUnlockedBuffer(): WriteBuffer;
}
