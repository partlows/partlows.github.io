import { CollectionName, DBChanges, DBEntity, KVStore, KVStoreTransaction, EntitySyncStore, KVStoreOrTransaction, DoubleBuffer, ApplyChangesOptions } from './types.js';
import { Timestamp } from './types.js';
export declare class EntityStoreWithOutbox implements EntitySyncStore {
    readonly storage: KVStore;
    doubleBuffer: DoubleBuffer;
    private store;
    constructor(storage: KVStore);
    get metadataStore(): import("./entity-metadata-store.js").EntityMetadataStore;
    get dataStore(): import("./types.js").EntityStore;
    applyChanges(tx: KVStoreTransaction, changes: DBChanges): Promise<DBChanges>;
    applyChangesWithTimestamp(tx: KVStoreTransaction, buffer: DBChanges, timestamp: Timestamp, options: ApplyChangesOptions): Promise<DBChanges>;
    getEntity(storage: KVStoreOrTransaction, collection: string, id: string): Promise<DBEntity | undefined>;
    getCollectionStats(storage: KVStoreOrTransaction): Promise<Map<string, number>>;
    getEntitiesInCollection(storage: KVStoreOrTransaction, collection: CollectionName): AsyncIterable<DBEntity>;
}
