import { Change, CollectionChanges, CollectionName, DBChanges, EntityId, KVStoreOrTransaction, KVStoreTransaction, WriteBuffer } from './types.js';
export declare class DurableWriteBuffer implements WriteBuffer {
    private readonly storagePrefix;
    constructor(storagePrefix?: string[]);
    clear(tx: KVStoreTransaction): Promise<void>;
    write(tx: KVStoreTransaction, changes: DBChanges): Promise<void>;
    getChanges(storage: KVStoreOrTransaction): Promise<DBChanges>;
    getChangesForCollection(storage: KVStoreOrTransaction, collectionName: CollectionName): Promise<CollectionChanges | undefined>;
    getChangesForEntity(storage: KVStoreOrTransaction, collectionName: CollectionName, id: EntityId): Promise<{
        update: Change;
        delete: boolean;
    } | undefined>;
    isEmpty(storage: KVStoreOrTransaction): Promise<boolean>;
    clearChangesForEntity(tx: KVStoreTransaction, collection: CollectionName, id: EntityId): Promise<void>;
}
